{% extends '_layout' %}

{% set id = 'index' %}
{% set title = 'Hangouts' %}

{% set content %}
    {% set currentDateTimeForComparison = now.format('Y-m-d H:i') %}

    {# Earlies previous hangouts #}
    {% set nextHangout = craft.entries({
        section: 'hangouts',
        orderBy: 'hangoutDateTime asc',
        hangoutDateTime: '> ' ~ currentDateTimeForComparison,
        limit: 1
    }).one() %}

    {% set previousHangouts = craft.entries({
        section: 'hangouts',
        orderBy: 'hangoutDateTime desc',
        hangoutDateTime: '< ' ~ currentDateTimeForComparison
    }).all() %}

    <div class="section">
        <div class="container">
            <div class="columns">
                <div class="column content">
                    {% if nextHangout %}
                        {% include 'hangouts/_includes/entry' with {entry: nextHangout} only %}
                    {% endif %}

                    <h1 class="title is-3 has-text-centered is-section-header">
                        <i class="fa fa-history"></i>
                        Previous Hangouts
                    </h1>
                    <div class="hangout__previews">
                        {% for previousHangout in previousHangouts %}
                            <div class="hangout hangout__previews--preview">
                                {% include 'hangouts/_includes/preview' with {entry: previousHangout} only %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endset %}
