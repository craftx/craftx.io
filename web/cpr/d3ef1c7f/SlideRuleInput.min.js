SlideRuleInput=Garnish.Base.extend({$container:null,$options:null,$selectedOption:null,$input:null,value:null,startPositionX:null,init:function(a,b){this.setSettings(b,SlideRuleInput.defaultSettings),this.value=0,this.graduationsMin=-70,this.graduationsMax=70,this.slideMin=-45,this.slideMax=45,this.$container=$("#"+a),this.$overlay=$('<div class="overlay"></div>').appendTo(this.$container),this.$cursor=$('<div class="cursor"></div>').appendTo(this.$container),this.$graduations=$('<div class="graduations"></div>').appendTo(this.$container),this.$graduationsUl=$("<ul></ul>").appendTo(this.$graduations);for(var c=this.graduationsMin;c<=this.graduationsMax;c++){var d=$('<li class="graduation" data-graduation="'+c+'"><div class="label">'+c+"</div></li>").appendTo(this.$graduationsUl);c%5==0&&d.addClass("main-graduation"),0==c&&d.addClass("selected")}this.$options=this.$container.find(".graduation"),this.addListener(this.$container,"resize",$.proxy(this,"_handleResize")),this.addListener(this.$container,"tapstart",$.proxy(this,"_handleTapStart")),this.addListener(Garnish.$bod,"tapmove",$.proxy(this,"_handleTapMove")),this.addListener(Garnish.$bod,"tapend",$.proxy(this,"_handleTapEnd")),setTimeout($.proxy(function(){this.graduationsCalculatedWidth=10*(this.$options.length-1),this.$graduationsUl.css("left",-this.graduationsCalculatedWidth/2+this.$container.width()/2)},this),50)},_handleResize:function(){var a=this.valueToPosition(this.value);this.$graduationsUl.css("left",a)},_handleTapStart:function(a,b){a.preventDefault(),this.startPositionX=b.position.x,this.startLeft=this.$graduationsUl.position().left,this.dragging=!0,this.onStart()},_handleTapMove:function(a,b){if(this.dragging){a.preventDefault();var c=this.startPositionX-b.position.x,d=this.startLeft-c,e=this.positionToValue(d);this.setValue(e),this.onChange()}},setValue:function(a){var b=this.valueToPosition(a);a<this.slideMin?(a=this.slideMin,b=this.valueToPosition(a)):a>this.slideMax&&(a=this.slideMax,b=this.valueToPosition(a)),this.$graduationsUl.css("left",b),a>=this.slideMin&&a<=this.slideMax&&(this.$options.removeClass("selected"),$.each(this.$options,function(b,c){$(c).data("graduation")>0&&$(c).data("graduation")<=a&&$(c).addClass("selected"),$(c).data("graduation")<0&&$(c).data("graduation")>=a&&$(c).addClass("selected"),0==$(c).data("graduation")&&$(c).addClass("selected")})),this.value=a},_handleTapEnd:function(a,b){this.dragging&&(a.preventDefault(),this.dragging=!1,this.onEnd())},positionToValue:function(a){var b=this.graduationsMin*-1,c=(this.graduationsMin-this.graduationsMax)*-1;return(this.$graduations.width()/2+a*-1)/this.graduationsCalculatedWidth*c-b},valueToPosition:function(a){var b=this.graduationsMin*-1,c=(this.graduationsMin-this.graduationsMax)*-1;return-((a+b)*this.graduationsCalculatedWidth/c-this.$graduations.width()/2)},onStart:function(){"function"==typeof this.settings.onChange&&this.settings.onStart(this)},onChange:function(){"function"==typeof this.settings.onChange&&this.settings.onChange(this)},onEnd:function(){"function"==typeof this.settings.onChange&&this.settings.onEnd(this)},defaultSettings:{onStart:$.noop,onChange:$.noop,onEnd:$.noop}});
//# sourceMappingURL=SlideRuleInput.min.js.map